generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model DailySales {
  id              String   @id @default(uuid())
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  status          String   @default("draft") // "draft" or "submitted"

  completedBy     String
  startingCash    Float

  // Sales
  cashSales       Float
  qrSales         Float
  grabSales       Float
  aroiDeeSales    Float
  totalSales      Float

  // Expenses
  shoppingExpenses Json
  wages            Json
  totalExpenses    Float

  // Banking
  closingCash      Float
  cashBanked       Float
  qrTransferred    Float
  amountBanked     Float

  // Notes
  notes            String?

  // Soft delete
  deletedAt        DateTime? // null = active, otherwise hidden
  
  // Relation to DailyStock
  stock            DailyStock?
}

model DailyStock {
  id             String   @id @default(uuid())
  salesFormId    String   @unique
  salesForm      DailySales @relation(fields: [salesFormId], references: [id])
  burgerBuns     Int
  meatGrams      Int
  drinks         Json     // e.g. { "Coke": 12, "Sprite": 7 }
  ingredients    Json     // e.g. { "Lettuce": 2, "Mayo": 1 }
  createdAt      DateTime @default(now())
}