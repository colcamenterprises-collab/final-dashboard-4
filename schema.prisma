generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model DailySales {
  id              String   @id @default(uuid())
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  status          String   @default("draft") // "draft" or "submitted"

  completedBy     String
  startingCash    Float

  // Sales
  cashSales       Float
  qrSales         Float
  grabSales       Float
  aroiDeeSales    Float
  totalSales      Float

  // Expenses
  shoppingExpenses Json
  wages            Json
  totalExpenses    Float

  // Banking
  closingCash      Float
  cashBanked       Float
  qrTransferred    Float
  amountBanked     Float

  // Notes
  notes            String?

  // Soft delete
  deletedAt        DateTime? // null = active, otherwise hidden
}

model DailyStock {
  id                String   @id @default(uuid())
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  // Link to the Prisma DailySales form entry (already exists); if not available yet, keep nullable for now
  salesFormId       String?
  // @relation(fields: [salesFormId], references: [id])
  // salesForm         DailySales? 

  meatGrams         Int
  burgerBuns        Int

  drinkStock        Json     // full map of drink -> number
  stockRequests     Json     // full map of item -> number (all items; zeros allowed)

  // Status
  status            String   @default("submitted") // keep simple for now
  deletedAt         DateTime?
}