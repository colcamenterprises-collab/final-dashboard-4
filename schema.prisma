generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model DailySales {
  id              String   @id @default(uuid())
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  status          String   @default("draft") // "draft" or "submitted"

  completedBy     String
  startingCash    Float

  // Sales
  cashSales       Float
  qrSales         Float
  grabSales       Float
  aroiDeeSales    Float
  totalSales      Float

  // Expenses
  shoppingExpenses Json
  wages            Json
  totalExpenses    Float

  // Banking
  closingCash      Float
  cashBanked       Float
  qrTransferred    Float
  amountBanked     Float

  // Notes
  notes            String?

  // Soft delete
  deletedAt        DateTime? // null = active, otherwise hidden
  
  // Relation to DailyStock
  stock            DailyStock?
}

model DailyStock {
  id                   String   @id @default(uuid())
  createdAt            DateTime @default(now())
  salesFormId          String   @unique
  salesForm            DailySales @relation(fields: [salesFormId], references: [id])

  // Stock Counts
  meatWeight           Int      // grams
  burgerBunsStock      Int

  // Drink Count
  drinkStock           Json     // { Coke: 12, Sprite: 6, etc. }

  // Ingredient Requests by Category
  freshFood            Json     // { Lettuce: 2, Tomato: 1, etc. }
  frozenFood           Json
  shelfItems           Json
  kitchenSupplies      Json
  packaging            Json

  updatedAt            DateTime @updatedAt
}