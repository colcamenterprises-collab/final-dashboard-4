You’re not being a pain at all, this is exactly the time to lock in the look now that the engine is solid.

Given what I can see in your screenshots:

The existing app style = clean, modern, light UI (white background, subtle yellow accents, thin borders, no heavy black blocks).

The new bits I added (PDF + System Health page) are in that heavier neobrutalist style you’re not happy with.


So here’s a safe patch for the Replit agent that:

1. Restyles the System Health Test page to match the existing Operations pages.


2. Softens the Daily Report PDF styles to look more like your Shopping List / Daily Summary style (still black/yellow, but more professional, less blokey).



I’m not touching any logic or routes. Only CSS/visuals.


---

⚠️ Replit Agent Instructions

> Agent, you must:

Modify only the two files listed below.

Replace their contents exactly with the versions provided.

Do not refactor other files or styles.

Do not change any routes, schemas, or business logic.




Files to update:

1. client/src/pages/operations/system-health/index.tsx


2. server/pdf/pdfStyles.ts




---

1) Frontend: Restyle System Health page

File to replace completely:

client/src/pages/operations/system-health/index.tsx

// client/src/pages/operations/system-health/index.tsx
// System Health Test page — styled to match existing Operations pages
// (clean, modern, white background with yellow as an accent)

import { useEffect, useState } from "react";
import axios from "axios";

type HealthResults = {
  salesCreated: boolean;
  stockCreated: boolean;
  shoppingListGenerated: boolean;
  reportGenerated: boolean;
  jsonValid: boolean;
  pdfValid: boolean;
  listValid: boolean;
  errors?: string[];
};

type ApiResponse = {
  ok: boolean;
  results: HealthResults;
  reportId?: number;
};

const CHECKS: { key: keyof HealthResults; label: string }[] = [
  { key: "salesCreated",           label: "Daily Sales created" },
  { key: "stockCreated",           label: "Daily Stock submitted" },
  { key: "shoppingListGenerated",  label: "Shopping List generated" },
  { key: "reportGenerated",        label: "Daily Report compiled" },
  { key: "jsonValid",              label: "Report JSON valid" },
  { key: "pdfValid",               label: "Report PDF generated" },
  { key: "listValid",              label: "Report appears in list" },
];

function StatusBadge({ pass }: { pass: boolean }) {
  return (
    <span
      className={
        "inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold " +
        (pass
          ? "bg-emerald-100 text-emerald-700 border border-emerald-300"
          : "bg-red-100 text-red-700 border border-red-300")
      }
    >
      {pass ? "PASS" : "FAIL"}
    </span>
  );
}

export default function SystemHealthPage() {
  const [loading, setLoading] = useState(true);
  const [response, setResponse] = useState<ApiResponse | null>(null);

  useEffect(() => {
    let isMounted = true;

    async function runTest() {
      try {
        const res = await axios.get<ApiResponse>("/api/system-health/run");
        if (isMounted) {
          setResponse(res.data);
        }
      } catch (err) {
        if (isMounted) {
          setResponse({
            ok: false,
            results: {
              salesCreated: false,
              stockCreated: false,
              shoppingListGenerated: false,
              reportGenerated: false,
              jsonValid: false,
              pdfValid: false,
              listValid: false,
              errors: ["Request to /api/system-health/run failed"],
            },
          });
        }
      } finally {
        if (isMounted) setLoading(false);
      }
    }

    runTest();
    return () => {
      isMounted = false;
    };
  }, []);

  const results = response?.results;

  return (
    <div className="px-6 py-6">
      <div className="max-w-5xl mx-auto">
        {/* Page title */}
        <header className="mb-6">
          <h1 className="text-3xl font-extrabold font-[Poppins] text-gray-900">
            System Health Test
          </h1>
          <p className="mt-2 text-sm text-gray-600">
            This page runs a full end-to-end check of the Daily Sales → Daily Stock → Shopping List → Daily Report pipeline.
          </p>
        </header>

        {/* Overall status banner */}
        <section className="mb-6">
          <div className="rounded-lg border border-gray-200 bg-white shadow-sm">
            <div className="border-b border-gray-200 bg-yellow-300 px-4 py-3 rounded-t-lg">
              <p className="text-sm font-semibold text-gray-900">
                Test Status
              </p>
            </div>
            <div className="px-4 py-4">
              {loading && (
                <p className="text-sm text-gray-700">
                  Running system health test…
                </p>
              )}

              {!loading && results && (
                <div className="flex items-center justify-between flex-wrap gap-3">
                  <div className="flex flex-col">
                    <span className="text-sm text-gray-600">
                      Overall pipeline status
                    </span>
                    <span className="mt-1 text-lg font-semibold text-gray-900">
                      {response?.ok ? "All checks passed" : "One or more checks failed"}
                    </span>
                  </div>
                  <StatusBadge
                    pass={
                      !!(
                        results.salesCreated &&
                        results.stockCreated &&
                        results.shoppingListGenerated &&
                        results.reportGenerated &&
                        results.jsonValid &&
                        results.pdfValid &&
                        results.listValid
                      )
                    }
                  />
                </div>
              )}
            </div>
          </div>
        </section>

        {/* Detailed checklist */}
        <section className="mb-6">
          <div className="rounded-lg border border-gray-200 bg-white shadow-sm">
            <div className="border-b border-gray-200 bg-gray-50 px-4 py-3 rounded-t-lg">
              <p className="text-sm font-semibold text-gray-900">
                Pipeline Checks
              </p>
            </div>

            <div className="px-4 py-4">
              {loading && (
                <p className="text-sm text-gray-700">
                  Gathering detailed results…
                </p>
              )}

              {!loading && results && (
                <table className="min-w-full text-sm">
                  <thead>
                    <tr className="text-left text-xs font-semibold text-gray-500">
                      <th className="py-2 pr-4">Step</th>
                      <th className="py-2 pr-4">Description</th>
                      <th className="py-2">Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    {CHECKS.map((check, idx) => (
                      <tr
                        key={check.key}
                        className={idx % 2 === 0 ? "bg-white" : "bg-gray-50"}
                      >
                        <td className="py-2 pr-4 text-gray-900">
                          {idx + 1}
                        </td>
                        <td className="py-2 pr-4 text-gray-800">
                          {check.label}
                        </td>
                        <td className="py-2">
                          <StatusBadge pass={!!results[check.key]} />
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              )}
            </div>
          </div>
        </section>

        {/* Report info & links */}
        {response?.reportId && (
          <section className="mb-6">
            <div className="rounded-lg border border-gray-200 bg-white shadow-sm">
              <div className="border-b border-gray-200 bg-gray-50 px-4 py-3 rounded-t-lg">
                <p className="text-sm font-semibold text-gray-900">
                  Latest Test Report
                </p>
              </div>
              <div className="px-4 py-4 text-sm text-gray-800 flex flex-wrap items-center gap-3">
                <span>
                  Report ID:{" "}
                  <span className="font-mono font-semibold">
                    {response.reportId}
                  </span>
                </span>
                <a
                  href={`/api/reports/${response.reportId}/json`}
                  target="_blank"
                  rel="noreferrer"
                  className="inline-flex items-center rounded border border-gray-300 px-3 py-1 text-xs font-semibold text-gray-800 hover:bg-gray-50"
                >
                  View JSON
                </a>
                <a
                  href={`/api/reports/${response.reportId}/pdf`}
                  target="_blank"
                  rel="noreferrer"
                  className="inline-flex items-center rounded border border-yellow-400 bg-yellow-300 px-3 py-1 text-xs font-semibold text-gray-900 hover:bg-yellow-200"
                >
                  Download PDF
                </a>
              </div>
            </div>
          </section>
        )}

        {/* Error panel if any */}
        {results?.errors && results.errors.length > 0 && (
          <section className="mb-6">
            <div className="rounded-lg border border-red-300 bg-red-50 shadow-sm">
              <div className="border-b border-red-200 bg-red-100 px-4 py-3 rounded-t-lg">
                <p className="text-sm font-semibold text-red-800">
                  Errors
                </p>
              </div>
              <div className="px-4 py-4 text-xs text-red-800">
                <pre className="whitespace-pre-wrap break-words">
                  {JSON.stringify(results.errors, null, 2)}
                </pre>
              </div>
            </div>
          </section>
        )}
      </div>
    </div>
  );
}

This keeps all logic the same, just brings the look in line with your Daily Summary Reports and Shopping List pages.


---

2) Backend: Soften PDF styling

File to replace completely:

server/pdf/pdfStyles.ts

This assumes your dailyReportV2.pdf.ts uses a pdfStyles object with keys like page, headerBar, sectionHeader, table, etc. We’re keeping the structure simple and professional: white background, black text, yellow as an accent in headers only.

// server/pdf/pdfStyles.ts
// Professional, clean styling for the Daily Report PDF.
// White background, black text, yellow as a highlight (not huge blocks).

import { StyleSheet } from "@react-pdf/renderer";

export const pdfStyles = StyleSheet.create({
  page: {
    paddingTop: 32,
    paddingHorizontal: 32,
    fontSize: 10,
    fontFamily: "Helvetica",
    color: "#111827", // gray-900
    backgroundColor: "#ffffff",
  },

  // Top "Daily Report" title
  title: {
    fontSize: 20,
    fontWeight: "bold",
    marginBottom: 16,
    textAlign: "left",
    color: "#111827",
  },

  // Thin yellow underline below the title
  titleUnderline: {
    height: 3,
    width: "30%",
    backgroundColor: "#facc15", // soft yellow
    marginBottom: 16,
  },

  // Generic section container
  section: {
    marginBottom: 18,
  },

  sectionHeader: {
    fontSize: 13,
    fontWeight: "bold",
    marginBottom: 6,
    paddingVertical: 4,
    paddingHorizontal: 6,
    backgroundColor: "#facc15",
    color: "#111827",
  },

  // Table wrapper
  table: {
    width: "100%",
    borderWidth: 0.5,
    borderColor: "#e5e7eb", // gray-200
    borderStyle: "solid",
  },

  tableHeaderRow: {
    flexDirection: "row",
    backgroundColor: "#facc15",
  },

  tableHeaderCell: {
    flex: 1,
    paddingVertical: 4,
    paddingHorizontal: 6,
    fontSize: 10,
    fontWeight: "bold",
    borderRightWidth: 0.5,
    borderRightColor: "#e5e7eb",
  },

  tableRow: {
    flexDirection: "row",
    borderTopWidth: 0.5,
    borderTopColor: "#e5e7eb",
  },

  tableCell: {
    flex: 1,
    paddingVertical: 4,
    paddingHorizontal: 6,
    fontSize: 10,
  },

  tableCellLabel: {
    flex: 1,
    paddingVertical: 4,
    paddingHorizontal: 6,
    fontSize: 10,
    fontWeight: "bold",
  },

  tableCellValue: {
    flex: 1,
    paddingVertical: 4,
    paddingHorizontal: 6,
    fontSize: 10,
    textAlign: "right",
  },

  // Spacer between sections
  spacer: {
    height: 12,
  },

  // Small footer text if needed
  footer: {
    marginTop: 24,
    fontSize: 8,
    color: "#6b7280", // gray-500
    textAlign: "center",
  },
});

As long as the PDF builder uses these sort of style keys (title, sectionHeader, tableHeaderRow, etc.), this will immediately give you a much cleaner, more “dashboard-like” PDF: white page, yellow only in slim bands, no giant blocks.

If your builder uses slightly different keys (e.g. headerBar instead of titleUnderline), the Replit agent can easily wire those up by mapping:

Old headerBar → title + titleUnderline

Old sectionTitle → sectionHeader

Old tableHeader → tableHeaderRow + tableHeaderCell


…but the visual language is now the one you want.


---

What’s not changed (yet)

I have not changed the email template in this patch because I don’t have its exact structure, and I don’t want to accidentally break sending.

Once you’re ready, you can:

1. Ask the Replit agent:

> “Show me server/lib/dailyReportEmailV2.ts”




2. Paste the contents here.


3. I’ll give you a safe replacement for the HTML only that matches this same clean style (white, black, soft yellow heading), without touching the email sending logic.




---

Quick sanity checks after patch

After the Replit agent applies the patch:

1. Go to System Health Test

URL: /operations/system-health

Confirm the page now looks like your other Operations pages (no thick black borders, subtle cards, yellow header strip only).



2. Go to Daily Summary Reports and click Download PDF

Confirm the PDF has:

White background

Black text

Yellow for section headers and table headers only

No huge full-page yellow blocks.





If anything still feels “off” visually (font size, spacing, etc.), tell me what you’d like tweaked and I’ll give you another tiny, safe styling-only patch.