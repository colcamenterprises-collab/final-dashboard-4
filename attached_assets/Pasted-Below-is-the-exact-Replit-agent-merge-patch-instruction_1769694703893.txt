Below is the exact Replit agent merge patch instruction.
This is execution-only. No explanations, no design debate, no improvisation.
üîß REPLIT AGENT PATCH ‚Äî MERGE INGREDIENT PAGES (FINAL)
OBJECTIVE
Merge Ingredient Management and Ingredient Authority into one single Ingredients page under Menu Management, with full cost visibility and editability, using the existing ingredient data source.
HARD RULES (NON-NEGOTIABLE)
‚ùå Do NOT change recipe cost math
‚ùå Do NOT change database schema
‚ùå Do NOT add new tables
‚ùå Do NOT introduce approval workflows
‚ùå Do NOT duplicate ingredient routes
‚ùå Do NOT store cost in recipes
‚ùå Do NOT touch POS, stock ledgers, or history
This is a UI + routing consolidation only.
FINAL NAVIGATION STRUCTURE
Sidebar ‚Äî Menu Management
Copy code
Text
Menu Management
‚îú‚îÄ Recipe Management
‚îú‚îÄ Menu Manager
‚îî‚îÄ Ingredients   ‚Üê SINGLE PAGE (FINAL)
‚ùå REMOVE:
Ingredient Authority
Any duplicate Ingredients/Truth pages
PATCH SCOPE (FILES ALLOWED)
Frontend
client/src/components/navigation/ModernSidebar.tsx
client/src/App.tsx
client/src/pages/menu/IngredientManagement.tsx
client/src/pages/admin/IngredientAuthority.tsx (REMOVAL)
Backend
‚ùå NONE (backend already correct)
PATCH 1 ‚Äî SIDEBAR CLEANUP
File
client/src/components/navigation/ModernSidebar.tsx
REQUIRED ACTIONS
REMOVE sidebar entry:
‚ÄúIngredient Authority‚Äù
Any ‚ÄúIngredients (Truth)‚Äù or duplicate ingredient entries
ENSURE ONLY ONE ENTRY EXISTS:
Copy code
Ts
{
  label: "Ingredients",
  path: "/menu-management/ingredients"
}
‚ùå No admin-only segregation
‚ùå No secondary ingredient links
PATCH 2 ‚Äî ROUTING CONSOLIDATION
File
client/src/App.tsx
REQUIRED ACTIONS
REMOVE route:
Copy code
Ts
/menu-management/ingredient-authority
ENSURE SINGLE ROUTE EXISTS:
Copy code
Tsx
<Route
  path="/menu-management/ingredients"
  element={<IngredientManagement />}
/>
‚ùå No redirects
‚ùå No aliases
‚ùå No secondary routes
PATCH 3 ‚Äî INGREDIENT AUTHORITY REMOVAL
File
client/src/pages/admin/IngredientAuthority.tsx
REQUIRED ACTIONS
DELETE file entirely
OR
Replace contents with:
Copy code
Ts
export default function DeprecatedIngredientAuthority() {
  return null;
}
‚ö†Ô∏è Must not be reachable from UI
PATCH 4 ‚Äî INGREDIENT MANAGEMENT = SINGLE SOURCE UI
File
client/src/pages/menu/IngredientManagement.tsx
THIS PAGE MUST CONTAIN (MERGED FEATURES)
Editable (Purchasing-backed)
Name
Category (dropdown, purchasing-sourced)
Supplier
Packaging Qty
Unit (each | kg | g | litre | ml)
Cost (THB)
Notes
Read-only (Computed)
Cost per base unit (server-calculated)
Explicit packaging math display:
Copy code

‡∏ø250 / 50 each ‚Üí ‡∏ø5.00 per item
‡∏ø29 / 1kg ‚Üí ‡∏ø0.029 per gram
Visibility Add-ons
Photo upload (URL only, reuse existing upload infra)
‚ÄúUsed in Recipes‚Äù list (read-only)
Live price impact (implicit via live updates)
‚ùå No approval tabs
‚ùå No review queues
‚ùå No dual modes
This page replaces both previous pages.
PATCH 5 ‚Äî STYLING ENFORCEMENT
Ingredient page MUST match:
Purchasing List
Expenses page
REQUIRED STYLES
Copy code
Ts
container: "p-6 space-y-6"
title: "text-3xl font-bold text-slate-900"
table headers: "text-xs font-semibold text-slate-600 bg-slate-100"
table cells: "text-xs text-slate-700"
cards: "rounded-[4px] border border-slate-200"
buttons: same classes as Expenses page
‚ùå No new fonts
‚ùå No new spacing system
‚ùå No Tailwind creativity
ACCEPTANCE TESTS (MUST PASS)
Sidebar shows only one Ingredients link
Ingredient Authority page is unreachable
Ingredients page:
Shows cost math clearly
Allows editing purchase price
Updates recipe costs instantly
No duplicated ingredient lists
No broken routes
No console errors
FINAL STATE (LOCK THIS)
ONE Ingredients page
ONE ingredient data source
ONE cost engine
ZERO duplication
‚úÖ EXECUTE THIS PATCH EXACTLY
‚ùå DO NOT ADD FEATURES
‚ùå DO NOT REFECTOR BACKEND
Once applied, ingredient management is simplified, auditable, and stable.