ğŸ” REPLIT AGENT PATCH â€” INGREDIENT MASTER CRASH FIX
MODE: READ / FIX / GUARD ONLY
â— PROBLEM (CONFIRMED)
The Ingredient Master page hard-crashes due to an invalid Radix Select usage:
Copy code

<Select.Item /> must have a value prop that is not an empty string
This happens because at least one <SelectItem value=""> exists.
Radix UI forbids empty string values and throws a runtime error.
This blocks:
Ingredients Master
Recipe setup
Costing workflow
Purchasing â†’ Ingredients pipeline
ğŸ¯ OBJECTIVE
Restore Ingredient Master page functionality by fixing invalid Select values.
No scope creep
No schema changes
No UI redesign
No logic changes beyond value handling
âœ… REQUIRED FIX (MANDATORY)
1ï¸âƒ£ FIND ALL EMPTY SELECT VALUES
Search the frontend for empty SelectItem values:
Copy code

<SelectItem value="">
Likely files (check all):
client/src/pages/operations/IngredientsMaster.tsx
Any shared Select used for:
portion unit
supplier
brand
category
2ï¸âƒ£ REPLACE EMPTY VALUE WITH SENTINEL
âŒ BEFORE (INVALID)
Copy code
Tsx
<SelectItem value="">
  None
</SelectItem>
âœ… AFTER (VALID)
Copy code
Tsx
<SelectItem value="__none__">
  None
</SelectItem>
3ï¸âƒ£ HANDLE SENTINEL IN STATE LOGIC
Wherever the Select value is consumed:
Copy code
Ts
const normalizedValue =
  value === "__none__" ? null : value;
Apply this only where the value is persisted or validated.
ğŸ›¡ï¸ GUARD REQUIREMENT (DO NOT SKIP)
Ensure no SelectItem anywhere in the app uses:
value=""
undefined
null
All SelectItem values must be non-empty strings.
ğŸ§ª VERIFICATION STEPS (MANDATORY)
After applying the fix:
Reload /operations/ingredients-master
Page must:
Render fully
No red React error overlay
Open every dropdown on the page
Selecting â€œNoneâ€ must:
Not crash
Clear the value correctly
Console must show zero runtime errors
ğŸš« EXPLICITLY NOT ALLOWED
âŒ No disabling Radix warnings
âŒ No try/catch wrappers
âŒ No UI hiding
âŒ No replacing Select component
âŒ No changes outside Select value handling
âœ… SUCCESS CRITERIA
Ingredient Master loads
Dropdowns function
No runtime crash
No side effects
System unblocked for operations