üîí REPLIT AGENT INSTRUCTION ‚Äî INGREDIENT AUTHORITY (FIX & ALIGNMENT PASS)
PROJECT
Final Dashboard 4.0 ‚Äì Smash Brothers Burgers
PURPOSE OF THIS TASK
You have already built the Ingredient Authority admin system.
This task is a correction + alignment pass only.
You MUST:
Fix routing and navigation placement
Correct unit handling rules
Verify review queue behavior
Leave the recipe system untouched
This is NOT a redesign or extension task.
üö´ ABSOLUTE PROHIBITIONS (RECONFIRMED)
You MUST NOT:
‚ùå Touch recipe builder UI or logic
‚ùå Modify /menu/recipes or /menu/recipes/new
‚ùå Modify ingredient add/remove behavior in recipes
‚ùå Add backend calls during recipe ingredient add
‚ùå Reintroduce ingredient writes during recipe composition
‚ùå Add joins or references from recipes to Ingredient Authority
‚ùå Modify GET /api/ingredients/legacy
‚ùå Enforce or normalise units (metric or otherwise)
‚ùå Auto-convert units
‚ùå Guess, infer, or auto-promote ingredients
If any of the above occurs ‚Üí STOP AND ABORT
‚úÖ REQUIRED FIXES (ALL MUST BE DONE)
1Ô∏è‚É£ ROUTING & SIDEBAR PLACEMENT (MANDATORY)
‚ùå CURRENT (WRONG)
Copy code

/admin/ingredient-authority
‚úÖ REQUIRED (LOCKED)
Copy code

/menu-management/ingredient-authority
Sidebar rules
Place under Menu Management
Visible to:
Owner
Manager
Hidden from:
Staff
Kitchen
Cashier
No icons
No badges
No shortcuts
No links from recipes or purchasing
This is management governance, not system admin.
2Ô∏è‚É£ UNIT HANDLING ‚Äî FINAL LOCKED RULE
SOURCE OF TRUTH
Unit fields MUST be free-text inputs
Stored value MUST be the literal string entered by the user
DROPDOWNS (ALLOWED AS HELPERS ONLY)
You MAY include a dropdown of common unit suggestions
Selecting a value MUST only insert text into the free-text field
Dropdowns MUST NOT:
Restrict values
Validate values
Enforce enums
Convert units
Normalise units
Reject non-metric or custom units
‚ùå FORBIDDEN
Fixed enums
Metric-only logic
Automatic conversions
Unit IDs instead of strings
Validation that blocks entries like:
2 slices
1 bag
0.5 cup
each
This system defines meaning, not math.
3Ô∏è‚É£ REVIEW QUEUE BEHAVIOR (VERIFY & FIX IF NEEDED)
Endpoint:
Copy code

GET /api/admin/ingredient-authority/review-queue
HARD RULES
Must be a read-only projection of legacy ingredients
MUST NOT:
Write back to legacy tables
Flag legacy rows
Modify purchasing data
Any ‚Äúignored‚Äù or ‚Äúapproved‚Äù state MUST live inside Ingredient Authority only
If the review queue mutates legacy data ‚Üí remove that logic
4Ô∏è‚É£ ACCESS CONTROL CONFIRMATION
Editing allowed:
Owner
Manager
Viewing allowed:
Owner
Manager
All endpoints protected accordingly
This is management-editable, not developer-only.
üìù REQUIRED FILE HEADER COMMENT (ALL IA FILES)
Add to the top of all Ingredient Authority UI + API files:
Copy code
Ts
// üîí INGREDIENT AUTHORITY
// Management-editable governance layer
// Lives under Menu Management for access ONLY
// Units are free-text (dropdowns are assistive only)
// MUST NOT be referenced by recipe builder or ingredient add flow
üß™ MANDATORY VERIFICATION BEFORE COMPLETION
You must confirm:
‚úÖ Recipe builder unchanged
‚úÖ No network traffic when adding/removing ingredients in recipes
‚úÖ No console errors
‚úÖ Ingredient Authority route is /menu-management/ingredient-authority
‚úÖ Sidebar placement is under Menu Management
‚úÖ Unit fields accept arbitrary text
‚úÖ Dropdowns do not enforce or validate units
‚úÖ Review queue does not mutate legacy data
‚úÖ Versioning still works as before
üö´ FAILURE CONDITIONS (AUTO-REJECT)
If you:
Leave the route under /admin
Enforce metric units
Convert or normalise units
Touch recipe files
Mutate legacy purchasing data
üëâ STOP IMMEDIATELY AND ABORT
‚úÖ SUCCESS CRITERIA
Ingredient Authority remains fully functional
Placement and access match management intent
Units are flexible and future-safe
Recipe system remains locked and stable
You are authorized to make ONLY the fixes above.
Do not improve, extend, or refactor beyond this scope