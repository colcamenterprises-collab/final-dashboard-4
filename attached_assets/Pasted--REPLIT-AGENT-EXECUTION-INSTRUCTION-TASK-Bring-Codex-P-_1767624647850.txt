üîê REPLIT AGENT ‚Äî EXECUTION INSTRUCTION
TASK: Bring Codex P&L Read Model Live
CONTEXT (DO NOT DEVIATE)
Codex has already produced the authoritative P&L architecture + code changes
The work is correct and approved
The blocker is purely mechanical: missing file / not yet present in Replit
This task is NOT to redesign, rethink, or ‚Äúimprove‚Äù anything
üéØ OBJECTIVE
Get the Codex P&L implementation running in Replit exactly as specified, with no functional changes.
üö´ ABSOLUTE RULES
DO NOT redesign P&L logic
DO NOT change schema, calculations, or categories
DO NOT refactor or ‚Äúoptimize‚Äù
DO NOT touch Purchasing, Recipes, Receipts, or Sales logic
DO NOT invent new endpoints
DO NOT delete existing financial data
DO NOT guess missing files ‚Äî follow instructions exactly
‚úÖ REQUIRED ACTIONS (IN ORDER)
1Ô∏è‚É£ CREATE MISSING FILE (BLOCKER FIX)
Create the file exactly at this path:
Copy code

server/routes/pnlReadModel.ts
Populate it exactly as per Codex output:
Read-only routes for /api/pnl
Optional rebuild endpoint (if included by Codex)
Must read exclusively from pnl_read_model
Must not compute totals on the fly
This file is the ONLY reason Codex halted. Nothing else.
2Ô∏è‚É£ VERIFY ROUTE REGISTRATION
Confirm that server/routes.ts properly registers:
Copy code
Ts
import pnlReadModelRoutes from "./routes/pnlReadModel";
app.use("/api/pnl", pnlReadModelRoutes);
If missing ‚Üí add it
If present ‚Üí leave untouched
3Ô∏è‚É£ VERIFY FRONTEND ROUTING (NO CHANGES)
Confirm the following already exist (DO NOT MODIFY unless missing):
Route: /analysis/profit-loss
Redirect from legacy /finance/profit-loss
Page file: client/src/pages/ProfitLoss.tsx
Sidebar entry points to /analysis/profit-loss
If present ‚Üí do nothing
If missing ‚Üí wire exactly, no redesign
4Ô∏è‚É£ START SERVER & VALIDATE
Run:
Copy code

npm run dev
Confirm:
App boots
/analysis/profit-loss loads
P&L page calls /api/pnl
Data Integrity panel renders
No runtime crashes
DO NOT seed, rebuild, or backfill data unless explicitly required to prevent crash
üß™ ACCEPTANCE CRITERIA (BINARY)
This task is complete when:
[ ] App starts without error
[ ] /api/pnl responds
[ ] Profit & Loss page loads
[ ] No financial logic changed
[ ] No unrelated files touched
üõë IF YOU HIT AN ISSUE
STOP immediately and report:
File path
Exact error message
What you were attempting
Do not workaround. Do not improvise.
This is a mechanical unblock, not a thinking task.