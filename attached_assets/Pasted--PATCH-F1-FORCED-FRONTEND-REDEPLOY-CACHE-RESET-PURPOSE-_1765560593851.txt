üîß PATCH F1 ‚Äî FORCED FRONTEND REDEPLOY (CACHE RESET)

PURPOSE

Force Replit to discard the old frontend bundle and deploy the new UI (Menu V3, POS, KDS, Legacy Bridge UI).

This patch does NOT touch backend logic or database.


---

‚ö†Ô∏è NON-NEGOTIABLE RULES FOR AGENT

‚ùå Do NOT modify any frontend code

‚ùå Do NOT modify routes, schemas, or services

‚ùå Do NOT optimize, refactor, or ‚Äúimprove‚Äù anything

‚úÖ ONLY execute the steps below, in order

‚úÖ STOP when complete



---

STEP 1 ‚Äî DELETE OLD BUILD ARTIFACTS (CRITICAL)

From project root, run:

rm -rf dist

Verify deletion (must return empty / error):

ls dist

If dist still exists ‚Üí STOP and delete again.


---

STEP 2 ‚Äî CLEAN VITE CACHE

Run:

rm -rf node_modules/.vite


---

STEP 3 ‚Äî FRESH BUILD (NO SHORTCUTS)

Run exactly:

npm run build


---

STEP 4 ‚Äî VERIFY NEW FRONTEND OUTPUT

All of the following MUST be true:

ls dist/public

Expected:

index.html

assets/ folder


Then verify timestamps (must be NEW):

ls -lah dist/public/assets

Files must have current timestamps, not older ones.


---

STEP 5 ‚Äî VERIFY CONTENT IS NEW UI

Run:

cat dist/public/index.html | head -20

Confirm:

Built by Vite

No legacy paths

No old branding strings



---

STEP 6 ‚Äî VERIFY SERVER STATIC PATH (READ ONLY)

Open (DO NOT MODIFY unless broken):

server/index.ts

Confirm it serves ONLY:

dist/public

If correct ‚Üí DO NOTHING.


---

STEP 7 ‚Äî PUBLISH (FINAL STEP)

1. Go to Replit ‚Üí Deploy


2. Click Publish


3. Wait for green success




---

‚úÖ POST-DEPLOY VERIFICATION (MANDATORY)

After publish, manually confirm in browser:

/menu-v3 ‚Üí Menu Master V3 UI loads

POS route ‚Üí POS UI visible

KDS route ‚Üí Kitchen Display visible

Legacy banner appears on empty data pages


If any of the above fail, STOP and report.


---

üö® WHAT THIS PATCH FIXES

‚ùå Old frontend bundle still being served

‚ùå New UI not visible

‚ùå False ‚Äúno data‚Äù perception

‚ùå Cache poisoning from prior deploys



---

üß† IMPORTANT CONTEXT (DO NOT SKIP)

This is not a data issue yet.
This is a static asset mismatch.

Once this patch completes successfully:

The new UI WILL appear

Legacy Bridge UI WILL show banners

Then we proceed to data recovery / migration

